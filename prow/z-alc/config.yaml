plank:
  job_url_template: '{{if .Spec.Refs}}{{if eq .Spec.Refs.Org "kubernetes-security"}}https://console.cloud.google.com/storage/browser/kubernetes-security-prow/{{else}}https://prow.k8s.io/view/gcs/kubernetes-jenkins/{{end}}{{else}}https://prow.k8s.io/view/gcs/kubernetes-jenkins/{{end}}{{if eq .Spec.Type "presubmit"}}pr-logs/pull{{else if eq .Spec.Type "batch"}}pr-logs/pull{{else}}logs{{end}}{{if .Spec.Refs}}{{if ne .Spec.Refs.Org ""}}{{if ne .Spec.Refs.Org "kubernetes"}}/{{if and (eq .Spec.Refs.Org "kubernetes-sigs") (ne .Spec.Refs.Repo "poseidon")}}sigs.k8s.io{{else}}{{.Spec.Refs.Org}}{{end}}_{{.Spec.Refs.Repo}}{{else if ne .Spec.Refs.Repo "kubernetes"}}/{{.Spec.Refs.Repo}}{{end}}{{end}}{{end}}{{if eq .Spec.Type "presubmit"}}/{{with index .Spec.Refs.Pulls 0}}{{.Number}}{{end}}{{else if eq .Spec.Type "batch"}}/batch{{end}}/{{.Spec.Job}}/{{.Status.BuildID}}/'
  report_template: '[Full PR test history](https://prow.k8s.io/pr-history?org={{.Spec.Refs.Org}}&repo={{.Spec.Refs.Repo}}&pr={{with index .Spec.Refs.Pulls 0}}{{.Number}}{{end}}). [Your PR dashboard](https://gubernator.k8s.io/pr/{{with index .Spec.Refs.Pulls 0}}{{.Author}}{{end}}). Please help us cut down on flakes by [linking to](https://git.k8s.io/community/contributors/devel/sig-testing/flaky-tests.md#filing-issues-for-flaky-tests) an [open issue](https://github.com/{{.Spec.Refs.Org}}/{{.Spec.Refs.Repo}}/issues?q=is:issue+is:open) when you hit one in your PR.'
  job_url_prefix: http://34.98.101.141/view/gcs/
  pod_pending_timeout: 60m
  default_decoration_config:
    timeout: 2h
    grace_period: 15s
    utility_images:
      clonerefs: "gcr.io/k8s-prow/clonerefs:v20190823-9f991db2d"
      initupload: "gcr.io/k8s-prow/initupload:v20190823-9f991db2d"
      entrypoint: "gcr.io/k8s-prow/entrypoint:v20190823-9f991db2d"
      sidecar: "gcr.io/k8s-prow/sidecar:v20190823-9f991db2d"
    gcs_configuration:
      bucket: "alc-prow-artifacts"
      path_strategy: explicit
    gcs_credentials_secret: gcs-credentials

sinker:
  resync_period: 1m
  max_prowjob_age: 48h
  max_pod_age: 30m

deck:
  spyglass: {}

pod_namespace: test-pods
prowjob_namespace: prow
log_level: debug

branch-protection:
  orgs:
    alcOrg:
      repos:
        prow-test:
          # Protect all branches from merging without status check
          protect: true
          enforce_admins: true  # rules apply to admins
          required_pull_request_reviews:
            required_approving_review_count: 2 # number of approvals
          # always require serverless-jenkins status
          required_status_checks:
            strict: true    # require PR branch to be up to date
            contexts:
            - test-presubmit
          restrictions:     # restrict who can push to the repo
            users:
            - alchen99
        test-infra:
          # Protect all branches from merging without status check
          protect: true
          enforce_admins: false  # rules apply to admins
          required_pull_request_reviews:
            required_approving_review_count: 1 # number of approvals
          # always require serverless-jenkins status
          required_status_checks:
            strict: true    # require PR branch to be up to date
            contexts:
            - test-presubmit
          restrictions:     # restrict who can push to the repo
            users:
            - alchen99
  protect-tested-repos: true

tide:
  context_options:
    from-branch-protection: true
    required-if-present-contexts: null
    skip-unknown-contexts: false
  queries:
  - repos:
    - alcOrg/prow-test
    - alcOrg/test-infra
    labels:
    - approved
    - approved2
    - lgtm
    missingLabels:
    - do-not-merge
    - do-not-merge/blocked-paths
    - do-not-merge/hold
    - do-not-merge/work-in-progress
    - do-not-merge/invalid-owners-file
    - needs-2-approvals
    - needs-ok-to-test
    - needs-rebase
  target_url: 
  merge_method:
    alcOrg/prow-test: merge
    alcOrg/test-infra: merge
  blocker_label: tide/merge-blocker
  squash_label: tide/merge-method-squash
  rebase_label: tide/merge-method-rebase
  merge_label: tide/merge-method-merge

# See https://github.com/kubernetes/test-infra/tree/master/prow/metrics
push_gateway: {}

github_reporter:
  job_types_to_report:
  - presubmit
  - postsubmit

owners_dir_blacklist:
  default: null
  repos: null

# prow credential presets 
# See https://github.com/kubernetes/test-infra/blob/master/prow/jobs.md
presets: {}

# prow job configs
periodics:
- interval: 30m
  agent: kubernetes
  name: echo-test
  spec:
    containers:
    - image: alpine
      command: ["/bin/date"]

postsubmits:
  alcOrg/prow-test:
  - name: test-postsubmit
    agent: kubernetes
    spec:
      containers:
      - image: alpine
        command: ["/bin/printenv"]

presubmits:
  alcOrg/prow-test:
  - name: test-presubmit
    agent: kubernetes
    always_run: true
    rerun_command: /test this
    trigger: (?m)^/test( all| this),?(\s+|$)
    spec:
      containers:
      - image: alpine
        command: ["/bin/printenv"]

  alcOrg/test-infra:
  - name: test-presubmit
    agent: kubernetes
    always_run: true
    rerun_command: /test this
    trigger: (?m)^/test( all| this),?(\s+|$)
    spec:
      containers:
      - image: alpine
        command: ["/bin/printenv"]

